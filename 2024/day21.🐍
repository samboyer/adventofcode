"""
☀2️⃣1️⃣❕
"""

🧼 = sorted
🖨 = print
🤐 = zip
👆 = abs
✅ = True
❌ = False

🛺 = min
🚛 = max
📏 = len
👩‍🌾 = range
🗺 = map
➕ = sum
⛓ = list
🎒 = set
✒️  = lambda ✖: str(✖)
🪓 = lambda ⭐, ✨: ⭐.split(✨)
📥 = lambda ⛓, ✨: ⛓.append(✨)
📥🎒 = lambda 🎒, ✨: 🎒.add(✨)
🔢 = lambda ✖: int(✖)
⏯⭐❓ = lambda ⭐, ✨: ⭐.startswith(✨)

0️⃣ = 0; 1️⃣ = 1; 2️⃣ = 2; 3️⃣ = 3; 4️⃣ = 4; 5️⃣ = 5;
6️⃣ = 6; 7️⃣ = 7; 8️⃣ = 8; 9️⃣ = 9; 🔟 = 10
2️⃣5️⃣ = 25; 7️⃣5️⃣ = 75; 2️⃣0️⃣2️⃣4️⃣ = 2024; 💯 = 100;
1️⃣2️⃣ = 12; 7️⃣0️⃣ = 70; 1️⃣0️⃣2️⃣4️⃣ = 1024

def 👓(✏):
    return [🚣‍♂️.strip() for 🚣‍♂️ in open(✏).readlines() if 🚣‍♂️.strip()]

def 👓🤏(✏):
    return open(✏).read()

def 💉(⭐, ↔, ✨):
    global 1️⃣
    return ⭐[:↔] + ✨ + ⭐[↔ + 1️⃣:]

# 🟩🟩🟩🅿1️⃣🟩🟩🟩

# 🧾 = 👓('input/21.example.txt')
🧾 = 👓('input/21.txt')


📱📍 = {
    '0': (1️⃣, 3️⃣),
    'A': (2️⃣, 3️⃣),
    '1': (0️⃣, 2️⃣),
    '2': (1️⃣, 2️⃣),
    '3': (2️⃣, 2️⃣),
    '4': (0️⃣, 1️⃣),
    '5': (1️⃣, 1️⃣),
    '6': (2️⃣, 1️⃣),
    '7': (0️⃣, 0️⃣),
    '8': (1️⃣, 0️⃣),
    '9': (2️⃣, 0️⃣),
}

➡📍 = {
    '^': (1️⃣, 0️⃣),
    'A': (2️⃣, 0️⃣),
    '<': (0️⃣, 1️⃣),
    'v': (1️⃣, 1️⃣),
    '>': (2️⃣, 1️⃣),
}

def 👩‍🍳🏃‍♀️⛓(🗺, 🎬, 🤖📍, 💥📍):
    global 👆,0️⃣

    👣⛓⛓ = ['']
    for ✖ in 🎬:
        🥅📍 = 🗺[✖]

        🏃‍♀️↔ = 🥅📍[0] - 🤖📍[0]
        🏃‍♀️↕ = 🥅📍[1] - 🤖📍[1]
        👣↔ = ('<' if (🏃‍♀️↔ < 0️⃣) else '>') * 👆(🏃‍♀️↔)
        👣↕ = ('^' if (🏃‍♀️↕ < 0️⃣) else 'v') * 👆(🏃‍♀️↕)

        🏃‍♀️↔📍 = (🤖📍[0]+🏃‍♀️↔, 🤖📍[1])
        🏃‍♀️↕📍 = (🤖📍[0], 🤖📍[1]+🏃‍♀️↕)

        if 🏃‍♀️↔📍 == 💥📍:
            👣⛓⛓ = [👣⛓+👣↕+👣↔+'A' for 👣⛓ in 👣⛓⛓]
        elif 🏃‍♀️↕📍 == 💥📍:
            👣⛓⛓ = [👣⛓+👣↔+👣↕+'A' for 👣⛓ in 👣⛓⛓]
        elif 👣↔ and 👣↕:
            👣⛓⛓ = (
                [👣⛓+👣↔+👣↕+'A' for 👣⛓ in 👣⛓⛓] 
                + [👣⛓+👣↕+👣↔+'A' for 👣⛓ in 👣⛓⛓]
            )
        else:
            👣⛓⛓ = [👣⛓+👣↔+👣↕+'A' for 👣⛓ in 👣⛓⛓]

        🤖📍 = 🥅📍
    return 👣⛓⛓

🎉 = 0️⃣

for 🎬 in 🧾:
    👣⛓⛓1️⃣ = 👩‍🍳🏃‍♀️⛓(📱📍,🎬, (2️⃣,3️⃣), (0️⃣,3️⃣))
    👣⛓⛓2️⃣ = []
    for 👣⛓1️⃣ in 👣⛓⛓1️⃣:
        👣⛓⛓2️⃣ += 👩‍🍳🏃‍♀️⛓(➡📍, 👣⛓1️⃣, (2️⃣,0️⃣), (0️⃣,0️⃣))

    👣⛓⛓3️⃣ = []
    for 👣⛓2️⃣ in 👣⛓⛓2️⃣:
        👣⛓⛓3️⃣ += 👩‍🍳🏃‍♀️⛓(➡📍, 👣⛓2️⃣, (2️⃣,0️⃣), (0️⃣,0️⃣))

    📏⛓ = 🗺(📏, 👣⛓⛓3️⃣)
    🤏📏 = 🧼(📏⛓)[0]

    ✖ = 🔢(🎬[:- 1️⃣])
    🎉 += ✖ * 🤏📏

🖨(🎉)
