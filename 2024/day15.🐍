"""
â˜€1ï¸âƒ£5ï¸âƒ£â•
"""

ğŸ§¼ = sorted
ğŸ–¨ = print
ğŸ¤ = zip
ğŸ‘† = abs
âœ… = True
âŒ = False

ğŸ›º = min
ğŸš› = max
ğŸ“ = len
ğŸ‘©â€ğŸŒ¾ = range
ğŸ—º = map
â• = sum
â›“ = list
ğŸ’ = set
âœ’ï¸  = lambda âœ–: str(âœ–)
ğŸª“ = lambda â­, âœ¨: â­.split(âœ¨)
ğŸ“¥ = lambda â›“, âœ¨: â›“.append(âœ¨)
ğŸ“¥ğŸ’ = lambda ğŸ’, âœ¨: ğŸ’.add(âœ¨)
ğŸ”¢ = lambda âœ–: int(âœ–)

0ï¸âƒ£ = 0; 1ï¸âƒ£ = 1; 2ï¸âƒ£ = 2; 3ï¸âƒ£ = 3; 4ï¸âƒ£ = 4; 5ï¸âƒ£ = 5;
6ï¸âƒ£ = 6; 7ï¸âƒ£ = 7; 8ï¸âƒ£ = 8; 9ï¸âƒ£ = 9; ğŸ”Ÿ = 10
2ï¸âƒ£5ï¸âƒ£ = 25; 7ï¸âƒ£5ï¸âƒ£ = 75; 2ï¸âƒ£0ï¸âƒ£2ï¸âƒ£4ï¸âƒ£ = 2024; ğŸ’¯ = 100;


def ğŸ‘“(âœ):
    return [ğŸš£â€â™‚ï¸.strip() for ğŸš£â€â™‚ï¸ in open(âœ).readlines() if ğŸš£â€â™‚ï¸.strip()]

def ğŸ‘“ğŸ¤(âœ):
    return open(âœ).read()

def ğŸ’‰(â­, â†”, âœ¨):
    global 1ï¸âƒ£
    return â­[:â†”] + âœ¨ + â­[â†” + 1ï¸âƒ£:]

# ğŸŸ©ğŸŸ©ğŸŸ©ğŸ…¿1ï¸âƒ£ğŸŸ©ğŸŸ©ğŸŸ©

# ğŸ§¾ = ğŸ‘“ğŸ¤('input/15.example.txt')
ğŸ§¾ = ğŸ‘“ğŸ¤('input/15.txt')

ğŸ­ğŸ§¾, ğŸ¬ğŸ§¾ = ğŸª“(ğŸ§¾, '\n\n')
ğŸ¬ğŸ§¾ = ğŸ¬ğŸ§¾.replace('\n','')
ğŸ­ = ğŸª“(ğŸ­ğŸ§¾,'\n')

ğŸ“ğŸ­â†• = ğŸ“(ğŸ­)
ğŸ“ğŸ­â†” = ğŸ“(ğŸ­[0ï¸âƒ£])

for â†• in ğŸ‘©â€ğŸŒ¾(ğŸ“ğŸ­â†•):
    try:
        â†” = ğŸ­[â†•].index('@')
        ğŸ¤–â†”, ğŸ¤–â†• = (â†”, â†•)
        break
    except:
        pass

ğŸ§­ = {
    '<': (- 1ï¸âƒ£, 0ï¸âƒ£),
    '>': (1ï¸âƒ£, 0ï¸âƒ£),
    '^': (0ï¸âƒ£, - 1ï¸âƒ£),
    'v': (0ï¸âƒ£, 1ï¸âƒ£)
}


def ğŸ›’(ğŸ“¦â†”, ğŸ“¦â†•, â¡):
    global ğŸ­, ğŸ›’,0ï¸âƒ£,1ï¸âƒ£,ğŸ’‰,âœ…,âŒ

    ğŸ“¦ = ğŸ­[ğŸ“¦â†•][ğŸ“¦â†”]

    ğŸ†•ğŸ“¦â†”, ğŸ†•ğŸ“¦â†• = ğŸ“¦â†” + â¡[0ï¸âƒ£], ğŸ“¦â†• + â¡[1ï¸âƒ£]
    if ğŸ­[ğŸ†•ğŸ“¦â†•][ğŸ†•ğŸ“¦â†”] == '.':
        ğŸ­[ğŸ†•ğŸ“¦â†•] = ğŸ’‰(ğŸ­[ğŸ†•ğŸ“¦â†•], ğŸ†•ğŸ“¦â†”, ğŸ“¦)
        ğŸ­[ğŸ“¦â†•] = ğŸ’‰(ğŸ­[ğŸ“¦â†•], ğŸ“¦â†”, '.')
        return âœ…

    elif ğŸ­[ğŸ†•ğŸ“¦â†•][ğŸ†•ğŸ“¦â†”] == '#':
        return âŒ

    elif ğŸ›’(ğŸ†•ğŸ“¦â†”, ğŸ†•ğŸ“¦â†•, â¡):
        ğŸ­[ğŸ†•ğŸ“¦â†•] = ğŸ’‰(ğŸ­[ğŸ†•ğŸ“¦â†•], ğŸ†•ğŸ“¦â†”, ğŸ“¦)
        ğŸ­[ğŸ“¦â†•] = ğŸ’‰(ğŸ­[ğŸ“¦â†•], ğŸ“¦â†”, '.')
        return âœ…
    else:
        return âŒ

for ğŸ¬ in ğŸ¬ğŸ§¾:
    â¡ = ğŸ§­[ğŸ¬]
    if ğŸ›’(ğŸ¤–â†”, ğŸ¤–â†•, â¡):
        ğŸ¤–â†”, ğŸ¤–â†• = ğŸ¤–â†” + â¡[0ï¸âƒ£], ğŸ¤–â†• + â¡[1ï¸âƒ£]

ğŸ‰ = 0ï¸âƒ£
for â†• in ğŸ‘©â€ğŸŒ¾(ğŸ“ğŸ­â†•):
    for â†” in ğŸ‘©â€ğŸŒ¾(ğŸ“ğŸ­â†”):
        if ğŸ­[â†•][â†”] == 'O':
            ğŸ‰ += â†• * 100 + â†”

ğŸ–¨(ğŸ‰)